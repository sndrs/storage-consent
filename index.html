<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<script type="module">
			import {
				regulateStorage,
				restoreStorage,
			} from './src/regulateStorage.js'

			const allowedKeys = ['allowed']

			console.group('Allowed storage keys:')
			allowedKeys.forEach((key) => console.log(`'${key}'`))
			console.groupEnd()

			regulateStorage({ allowedKeys, debug: true })
			sessionStorage.setItem('allowed', 'good data')

			try {
				// this will error, so try/catching it
				localStorage.setItem('not-allowed', 'evil data')
			} catch (e) {
				console.error(e)
			}

			restoreStorage({ debug: true })
			sessionStorage.setItem('allowed', 'good data')

			console.log("setting 'not-allowed' key")
			// doesn't error now, the native, unregulated localStorage
			// is has been restored
			localStorage.setItem('not-allowed', 'evil data')
			console.log(
				`localStorage['not-allowed'] is '${localStorage.getItem(
					'not-allowed',
				)}'`,
			)
		</script>
	</head>
	<body>
		the infoâ€™s in the console...
	</body>
</html>
